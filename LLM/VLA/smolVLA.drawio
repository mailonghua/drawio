<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" version="28.1.0">
  <diagram name="第 1 页" id="QBfmjMHsHBRAcdPXaFrD">
    <mxGraphModel dx="783" dy="452" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="l6EJtao8Zm6sJSQqBp27-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;curved=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-1" target="l6EJtao8Zm6sJSQqBp27-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-1" value="从N(0,1)随机采样噪声&lt;div&gt;Noise&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="100" y="135" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-7" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-2" target="l6EJtao8Zm6sJSQqBp27-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-8" value="对时间求导" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="l6EJtao8Zm6sJSQqBp27-7">
          <mxGeometry x="-0.26" y="-1" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-13" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-2" target="l6EJtao8Zm6sJSQqBp27-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-2" value="&lt;div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;构建线性插值轨迹，表示从action走到noise的一条直线轨迹&lt;br&gt;Xt&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;=t⋅noise+(1−t)⋅actions&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="240" y="130" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;curved=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-4" target="l6EJtao8Zm6sJSQqBp27-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-4" value="从数据集中获取action" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="255" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-6" target="l6EJtao8Zm6sJSQqBp27-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-6" value="得到轨迹速度，方向是加噪方向&amp;nbsp;&lt;div&gt;u_t = noise - actions&lt;br&gt;(Ground truth Velocity)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="240" y="220" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-11" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-9" target="l6EJtao8Zm6sJSQqBp27-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-9" value="从数据集中获取对应的image和Text" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="400" y="70" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-10" target="l6EJtao8Zm6sJSQqBp27-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-10" value="编码" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="550" y="70" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-12" target="l6EJtao8Zm6sJSQqBp27-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-12" value="动作编码" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="140" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-14" value="token&amp;amp;mask" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="620" y="70" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-16" value="token&amp;amp;mask" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="490" y="140" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-22" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-18" target="l6EJtao8Zm6sJSQqBp27-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-18" value="参数冻结&amp;amp;Forward前向推理" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="210" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-19" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.162;entryY=-0.005;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-16" target="l6EJtao8Zm6sJSQqBp27-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-20" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.84;entryY=-0.065;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-14" target="l6EJtao8Zm6sJSQqBp27-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-21" target="l6EJtao8Zm6sJSQqBp27-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-21" value="expert_out 映射动作空间" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="507.5" y="270" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-23" target="l6EJtao8Zm6sJSQqBp27-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-23" value="计算loss" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="507.5" y="320" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-25" value="..." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="810" y="240" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-42" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-26" target="l6EJtao8Zm6sJSQqBp27-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-43" value="KV" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="l6EJtao8Zm6sJSQqBp27-42">
          <mxGeometry x="-0.2063" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-26" value="layer n" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="810" y="260" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-41" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-27" target="l6EJtao8Zm6sJSQqBp27-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-27" value="...." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="810" y="280" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-40" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-28" target="l6EJtao8Zm6sJSQqBp27-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-28" value="layer1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="810" y="300" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-39" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-29" target="l6EJtao8Zm6sJSQqBp27-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-45" value="KV" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="l6EJtao8Zm6sJSQqBp27-39">
          <mxGeometry x="-0.2063" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-29" value="layer 0" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="810" y="320" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-30" value="SmolVLM" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="210" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-31" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="790" y="260" width="20" height="80" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-32" value="裁剪后的层数" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="710" y="275" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-51" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-34" target="l6EJtao8Zm6sJSQqBp27-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-34" value="Cross" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="260" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-35" value="...." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="280" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-36" value="Self" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="300" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-37" value="Cross attn" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="990" y="320" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-38" value="Expert Model" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1010" y="205" width="80" height="15" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-50" value="action out" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=12 12;strokeColor=#FF00FF;" vertex="1" parent="1">
          <mxGeometry x="990" y="225" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-59" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="l6EJtao8Zm6sJSQqBp27-52" target="l6EJtao8Zm6sJSQqBp27-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-52" value="Backward &amp;amp; 更新参数&amp;amp;..." style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="507.5" y="370" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-54" value="&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 将vlm和expert的层数进行穿插存放&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 1.如果vlm和expert的层数不一致，则将按照multiple_of的进行层数穿插存放&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2.如果vlm和expert的层数一致，则将expert的层数进行逐层存放&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="790" y="145" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l6EJtao8Zm6sJSQqBp27-58" value="Loop" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="507.5" y="420" width="155" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
